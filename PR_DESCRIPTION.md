# 같이사요 그룹 채팅 기능 구현 및 지도 페이지 오류 수정

## 📋 변경 사항 요약

이 PR은 같이사요 상품에 그룹 채팅 기능을 추가하고, 지도 페이지에서 발생하던 오류를 수정합니다.

## ✨ 주요 기능

### 1. 같이사요 그룹 채팅 기능 구현
- 같이사요 상품에서 채팅하기를 누르면 여러 명이 참여할 수 있는 그룹 채팅방 생성
- 기존 그룹 채팅방이 있으면 자동으로 참여
- 새 참여자가 추가되면 기존 채팅방에 자동 참여

### 2. 채팅 UI 개선
- 채팅방 이름을 상품 제목으로 표시 (기존: "같이사요 채팅 (N명)")
- 그룹 채팅에서 발신자 이름 표시
- 채팅 목록에서 "같이사요 채팅 (N명)" 형식으로 표시

### 3. 알림 기능 개선
- 그룹 채팅에서 메시지 전송 시 모든 참여자에게 알림 전송
- 모든 참여자의 읽지 않은 메시지 수 업데이트

### 4. 같이사요 생성 페이지 기능 구현
- 이미지 선택 기능 추가
- 위치 선택 기능 추가
- 날짜/시간 선택 기능 추가
- 실제 Firestore 저장 기능 구현

### 5. 지도 페이지 오류 수정
- 지도에서 같이사요 게시물 클릭 시 발생하던 오류 수정
- `Listing` 객체를 `Product` 객체로 변환하는 헬퍼 함수 추가
- Firebase 모드에서도 정상 작동하도록 수정

## 📝 수정된 파일

- `lib/pages/chat_list_page.dart`: 그룹 채팅방 이름 표시 개선
- `lib/pages/chat_page.dart`: 그룹 채팅 기능 구현 및 UI 개선
- `lib/pages/group_buy_create_page.dart`: 같이사요 생성 페이지 기능 구현
- `lib/pages/map_page.dart`: 지도 페이지 오류 수정 및 Listing → Product 변환 함수 추가
- `lib/pages/product_detail_page.dart`: 같이사요 상품에 그룹 채팅방 생성 로직 추가

## 🧪 테스트 방법

1. **같이사요 그룹 채팅 테스트**
   - 같이사요 상품을 생성
   - 다른 사용자로 로그인하여 해당 상품에서 채팅하기 클릭
   - 그룹 채팅방이 생성되고 메시지 전송 확인
   - 추가 사용자가 참여하여 같은 채팅방에 참여하는지 확인

2. **채팅방 이름 표시 테스트**
   - 채팅 목록에서 같이사요 채팅방 이름이 상품 제목으로 표시되는지 확인
   - 채팅 페이지 AppBar에서 상품 제목이 표시되는지 확인

3. **지도 페이지 테스트**
   - 지도에서 같이사요 게시물 마커 클릭
   - 상세보기 버튼 클릭하여 상세 페이지로 이동 확인
   - 오류 없이 정상 작동하는지 확인

## 🔍 관련 이슈

- 같이사요 상품에 그룹 채팅 기능 필요
- 지도 페이지에서 같이사요 게시물 클릭 시 오류 발생

## 📸 스크린샷 (선택사항)

- 그룹 채팅방 화면
- 채팅 목록에서 같이사요 채팅방 표시
- 지도 페이지에서 상품 상세보기

